"use strict";(self.webpackChunkyui_docs_yui_ibc_solidity=self.webpackChunkyui_docs_yui_ibc_solidity||[]).push([[672],{4124:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return r},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return d},default:function(){return u}});var o=t(7462),i=t(3366),a=(t(7294),t(3905)),l=["components"],r={sidebar_position:5},c="Execute token transfer",s={unversionedId:"minitoken/interaction",id:"minitoken/interaction",isDocsHomePage:!1,title:"Execute token transfer",description:"For the environment deployed so far,",source:"@site/docs/minitoken/interaction.md",sourceDirName:"minitoken",slug:"/minitoken/interaction",permalink:"/yui-docs/yui-ibc-solidity/minitoken/interaction",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Deploy contracts",permalink:"/yui-docs/yui-ibc-solidity/minitoken/deploy"}},d=[{value:"Initial balances for Alice and Bob",id:"initial-balances-for-alice-and-bob",children:[],level:2},{value:"Mint to Alice on ledger IBC0",id:"mint-to-alice-on-ledger-ibc0",children:[],level:2},{value:"Transfer token from Alice on ledger IBC0 to Bob on ledger IBC1",id:"transfer-token-from-alice-on-ledger-ibc0-to-bob-on-ledger-ibc1",children:[],level:2},{value:"Check the MiniToken balance from Bob on the ledger IBC1.",id:"check-the-minitoken-balance-from-bob-on-the-ledger-ibc1",children:[],level:2}],k={toc:d};function u(e){var n=e.components,t=(0,i.Z)(e,l);return(0,a.kt)("wrapper",(0,o.Z)({},k,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"execute-token-transfer"},"Execute token transfer"),(0,a.kt)("p",null,"For the environment deployed so far,\nuse ",(0,a.kt)("inlineCode",{parentName:"p"},"truffle console")," to transfer the token to the environment we have just deployed."),(0,a.kt)("p",null,"The ledger and network names used here are as follows"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"IBC0 (network name is ",(0,a.kt)("inlineCode",{parentName:"li"},"ibc0"),")"),(0,a.kt)("li",{parentName:"ul"},"IBC1 (network name is ",(0,a.kt)("inlineCode",{parentName:"li"},"ibc1"),")")),(0,a.kt)("p",null,"To run truffle console with the network name, do the following:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"truffle console --network=<network name>\n")),(0,a.kt)("p",null,"The actors on the ledger are the following for both ledgers"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Alice (",(0,a.kt)("inlineCode",{parentName:"li"},"accounts[1]"),")"),(0,a.kt)("li",{parentName:"ul"},"Bob (",(0,a.kt)("inlineCode",{parentName:"li"},"accounts[2]"),")")),(0,a.kt)("h2",{id:"initial-balances-for-alice-and-bob"},"Initial balances for Alice and Bob"),(0,a.kt)("p",null,"Make sure that the following balances are zero."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Alice on IBC0"),(0,a.kt)("li",{parentName:"ul"},"Bob on IBC1")),(0,a.kt)("p",null,"For each, you can switch the network to connect to and check the following:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// i = 1 for Alice, i = 2 for Bob\nMiniToken.deployed()\n    .then((instance) => instance.balanceOf(accounts[i]))\n")),(0,a.kt)("h2",{id:"mint-to-alice-on-ledger-ibc0"},"Mint to Alice on ledger IBC0"),(0,a.kt)("p",null,"Prepare just 100 MiniTokens on Alice."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const accounts = await web3.eth.getAccounts();\nconst alice = accounts[1];\n\nawait MiniToken.deployed().then(instance => instance.mint(alice, 100));\n")),(0,a.kt)("p",null,"When ",(0,a.kt)("inlineCode",{parentName:"p"},"mint")," succeeds, the ",(0,a.kt)("inlineCode",{parentName:"p"},"Mint")," event will be emitted. To check this, do the following."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'MiniToken.deployed()\n    .then(instance => instance.getPastEvents("Mint", { fromBlock: 0 }))\n    .then(event => console.log(event));\n')),(0,a.kt)("h2",{id:"transfer-token-from-alice-on-ledger-ibc0-to-bob-on-ledger-ibc1"},"Transfer token from Alice on ledger IBC0 to Bob on ledger IBC1"),(0,a.kt)("p",null,"Transfer 50 MiniTokens to Bob on IBC1."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'const port = "transfer";\nconst channel = "channel-0";\n\nconst bob = accounts[2];\nawait MiniToken.deployed()\n    .then(instance => instance.sendTransfer(50, bob, port, channel, 0, {from: alice}));\n')),(0,a.kt)("h2",{id:"check-the-minitoken-balance-from-bob-on-the-ledger-ibc1"},"Check the MiniToken balance from Bob on the ledger IBC1."),(0,a.kt)("p",null,"It will take some time for the Packet to be relayed.\nAfter that, you can see that the balance has increased as shown below."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"await MiniToken.deployed()\n    .then((instance) => instance.balanceOf(bob));\n")))}u.isMDXComponent=!0}}]);